---
layout: post
title: "Taylor Swift - Gathering Data"
author: Kelsey Moore
description: Analyzing the popularity of Taylor Swift songs - Part 1
image: /assets/images/taylor-swift-1.jpg
---

## Introduction

As many journalists and pop music enthusiasts have <a href="https://voiceskopje.org/2022/03/25/the-music-industry-has-a-name-and-its-taylor-swift/"> remarked</a>, "Taylor Swift is the music industry." She started her music career 16 years ago, and has released 10 big albums, plus many other singles and special records, for a total of over 200 songs. She has changed genres and styles many times in order to keep up with trends, and she has consistently <a href="https://www.billboard.com/artist/taylor-swift/chart-history/hsi/"> topped the charts</a> with each new release. Since she has so much music, I thought it would be interesting to see what her most popular songs have in common, and how they differ from her less popular music. 

<img src="https://raw.githubusercontent.com/kbmoore02/my386blog/main/assets/images/the-eras-tour.jpg" alt="">

## Data Collection

### Tools

I used Python (Jupyter Notebooks) to get data from both the Spotify API and a Billboards Hot 100 page. I ensured that I was allowed to gather and use this data by checking the API documentation and the robots.txt page for Billboards. 

### Step 1: Gaining Access to the API

I used the free <a href="https://apilayer.com/marketplace/spotify-api#documentation-tab"> Spotify API</a> available from APILayer. It's pretty simple to set up an account, and once you do, you can subscribe to all sorts of different APIs. 

<img src="https://raw.githubusercontent.com/kbmoore02/my386blog/main/assets/images/api-1.jpg" alt="" style="width:700px;">

For each one you sign up for, you'll get a unique API key. 

<img src="https://raw.githubusercontent.com/kbmoore02/my386blog/main/assets/images/api-2.jpg" alt="" style="width:700px;">

This is how you'll connect to each specific API from whatever coding platform you're using (in this case, Python Jupyter Notebooks). 

```python
apikey = "it's a secret"

payload = {}
headers = {'apikey': apikey}

base_url = "https://api.apilayer.com/spotify/"
endpoint_url = "album_tracks"
album_url = "album_metadata"
```
Most APIs have many different endpoints. This particular one has 21 to choose from, so I played around with the live demo for a while until I figured out which ones would give me the information I wanted; in this case, it was the album_tracks and album_metadata endpoints. 

### Step 2: Getting the Parameters

Each artist, album, song, playlist, and user on Spotify has a unique identification code (URI). I found all of the URIs for each album and put them into a list so that I could iterate through them and pull in their data.

<img src="https://raw.githubusercontent.com/kbmoore02/my386blog/main/assets/images/spotify-uri.jpg" alt="" style="width:400px;">

### Step 3: Pulling Data from the API

Once I had my API key and all of my albums IDs set up, I started to pull data from the API. 

```python
params = {'id': '3lS1y25WAhcqJDATJK70Mq'}
r = rq.get(base_url + endpoint_url, params=params, headers=headers, data=payload)
data = pd.DataFrame(r.json())
```
This gave me a table for the first album which, after I got down to its base level, contained a dictionary for each song with all of the information I wanted to gather. 

<img src="https://raw.githubusercontent.com/kbmoore02/my386blog/main/assets/images/dictionary.jpg" alt="" style="width:600px;">

I then interated through all of the albums and put all of this data into one table, with 5 columns: Title, Album, Track Number, Play Count, and Duration in Seconds. 

### Step 4: Web Scraping Data


Once I had all of the data loaded into one table, I had to do a lot of data cleaning to get the information into a format I was able to use. I won't bore you with the details, but in the end, the final dataset includes six variables: Title, Album, Track Number, Rating, Play Count, and Duration in Seconds.

Obviously I won't be analyzing for causation, but I would like to see how these different factors correlate to song popularity. I will be using play count to measure song popularity, but I may have to find a way to standardize, since we would expect the older songs to have a higher play count. I'm not sure yet what I'll find, but I'll be interested to see where in the rankings my personal favorite songs fall. From the knowledge I have of Taylor Swift's music and career, I think that her middle few albums (Red, 1989, and Reputation) will be the most popular, and I think that each track 5 will be one of the most popular songs on its respective album. There's a lot of information here to uncover, and I'm excited to see where the data takes us!

All of my code as well as the full dataset can be found <a href="https://github.com/kbmoore02/Blog_3.git"> here </a>.
